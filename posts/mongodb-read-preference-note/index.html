<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=HandheldFriendly content="True"><meta http-equiv=x-ua-compatible content="IE=edge"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=generator content="Hugo 0.68.3"><link rel="shortcut icon" href=https://cdn.jsdelivr.net/gh/amzrk2/poal-jsdelivr@1.2.0/favicons/favicon.ico><title>MongoDB : Replica Set ã®å‚ç…§è¨­å®š - mknkisk.log</title><meta name=author content><meta name=description content="ğŸ“MongoDB ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç®‡æ¡æ›¸ãã—ã¦ã„ãã€‚éšæ™‚æ›´æ–°
Env / Versions  MongoDB v3.6  å‚ç…§ã®å„ªå…ˆåº¦è¨­å®š  âš ï¸ Primary ã‹ã‚‰ Secondary ã¸ã®éåŒæœŸãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯é…å»¶ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€å¤ã„ãƒ‡ãƒ¼ã‚¿ãŒè¿”ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹  å‚ç…§ã®ãƒ¢ãƒ¼ãƒ‰  å„ MongoDB ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã¯ä»¥ä¸‹ã®ï¼•ã¤ã®ãƒ¢ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹  primary  Primary ã‹ã‚‰ã®ã¿å‚ç…§ã™ã‚‹ Primary ãŒä½¿ç”¨ã§ããªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ  primaryPreferred  Primary ã‹ã‚‰å‚ç…§ã™ã‚‹ãŒä½¿ç”¨ã§ããªã„å ´åˆã¯ Secondary ã‹ã‚‰å‚ç…§ã™ã‚‹  secondary  Secondary ã‹ã‚‰ã®ã¿å‚ç…§ã™ã‚‹ ä½¿ç”¨å¯èƒ½ãª Secondary ãŒç„¡ã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹  secondaryPreferred  Secondary ã‹ã‚‰å‚ç…§ã™ã‚‹ãŒä½¿ç”¨å¯èƒ½ãª Secondary ãŒï¼‘å°ã‚‚ãªã„å ´åˆã¯ Primary ã‹ã‚‰å‚ç…§ã™ã‚‹  nearest  ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãŒæœ€ã‚‚ä½ã„ãƒ¡ãƒ³ãƒãƒ¼ã‹ã‚‰å‚ç…§ã™ã‚‹ Primary, Secondary å•ã‚ãªã„  ã‚µãƒ¼ãƒé¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ   ã‚µãƒ¼ãƒãƒ¼ã®é¸æŠã¯æ“ä½œã”ã¨ã«1å›ç™ºç”Ÿã—ã€å‚ç…§è¨­å®šã¨localThresholdMS ã®è¨­å®šã«ã‚ˆã£ã¦æ±ºã‚ã‚‰ã‚Œã‚‹ ã‚µãƒ¼ãƒé¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯å„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ secondary ã¾ãŸã¯ secondaryPreferred ãƒ¢ãƒ¼ãƒ‰ã‚’æŒ‡å®šã—ãŸå ´åˆ * æœ€ã‚‚ä½ã„ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· + 15msec ä»¥å†…ã®ã‚µãƒ¼ãƒã‚’ã€Œä½¿ç”¨å¯èƒ½ã€ã¨ã™ã‚‹  15msec ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã‚ã‚Šå¤‰æ›´å¯èƒ½ ã€Œä½¿ç”¨å¯èƒ½ã€ãªã‚µãƒ¼ãƒç¾¤ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã§æ¥ç¶šå…ˆãŒæ±ºå®šã•ã‚Œã‚‹    Links  https://docs."><meta property="og:title" content="MongoDB : Replica Set ã®å‚ç…§è¨­å®š"><meta property="og:description" content="ğŸ“MongoDB ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç®‡æ¡æ›¸ãã—ã¦ã„ãã€‚éšæ™‚æ›´æ–°
Env / Versions  MongoDB v3.6  å‚ç…§ã®å„ªå…ˆåº¦è¨­å®š  âš ï¸ Primary ã‹ã‚‰ Secondary ã¸ã®éåŒæœŸãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯é…å»¶ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€å¤ã„ãƒ‡ãƒ¼ã‚¿ãŒè¿”ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹  å‚ç…§ã®ãƒ¢ãƒ¼ãƒ‰  å„ MongoDB ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã¯ä»¥ä¸‹ã®ï¼•ã¤ã®ãƒ¢ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹  primary  Primary ã‹ã‚‰ã®ã¿å‚ç…§ã™ã‚‹ Primary ãŒä½¿ç”¨ã§ããªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ  primaryPreferred  Primary ã‹ã‚‰å‚ç…§ã™ã‚‹ãŒä½¿ç”¨ã§ããªã„å ´åˆã¯ Secondary ã‹ã‚‰å‚ç…§ã™ã‚‹  secondary  Secondary ã‹ã‚‰ã®ã¿å‚ç…§ã™ã‚‹ ä½¿ç”¨å¯èƒ½ãª Secondary ãŒç„¡ã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹  secondaryPreferred  Secondary ã‹ã‚‰å‚ç…§ã™ã‚‹ãŒä½¿ç”¨å¯èƒ½ãª Secondary ãŒï¼‘å°ã‚‚ãªã„å ´åˆã¯ Primary ã‹ã‚‰å‚ç…§ã™ã‚‹  nearest  ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãŒæœ€ã‚‚ä½ã„ãƒ¡ãƒ³ãƒãƒ¼ã‹ã‚‰å‚ç…§ã™ã‚‹ Primary, Secondary å•ã‚ãªã„  ã‚µãƒ¼ãƒé¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ   ã‚µãƒ¼ãƒãƒ¼ã®é¸æŠã¯æ“ä½œã”ã¨ã«1å›ç™ºç”Ÿã—ã€å‚ç…§è¨­å®šã¨localThresholdMS ã®è¨­å®šã«ã‚ˆã£ã¦æ±ºã‚ã‚‰ã‚Œã‚‹ ã‚µãƒ¼ãƒé¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯å„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ secondary ã¾ãŸã¯ secondaryPreferred ãƒ¢ãƒ¼ãƒ‰ã‚’æŒ‡å®šã—ãŸå ´åˆ * æœ€ã‚‚ä½ã„ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· + 15msec ä»¥å†…ã®ã‚µãƒ¼ãƒã‚’ã€Œä½¿ç”¨å¯èƒ½ã€ã¨ã™ã‚‹  15msec ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã‚ã‚Šå¤‰æ›´å¯èƒ½ ã€Œä½¿ç”¨å¯èƒ½ã€ãªã‚µãƒ¼ãƒç¾¤ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã§æ¥ç¶šå…ˆãŒæ±ºå®šã•ã‚Œã‚‹    Links  https://docs."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.mknkisk.com/posts/mongodb-read-preference-note/"><meta property="article:published_time" content="2018-06-04T01:36:29+09:00"><meta property="article:modified_time" content="2018-06-04T01:36:29+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="MongoDB : Replica Set ã®å‚ç…§è¨­å®š"><meta name=twitter:description content="ğŸ“MongoDB ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç®‡æ¡æ›¸ãã—ã¦ã„ãã€‚éšæ™‚æ›´æ–°
Env / Versions  MongoDB v3.6  å‚ç…§ã®å„ªå…ˆåº¦è¨­å®š  âš ï¸ Primary ã‹ã‚‰ Secondary ã¸ã®éåŒæœŸãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯é…å»¶ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€å¤ã„ãƒ‡ãƒ¼ã‚¿ãŒè¿”ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹  å‚ç…§ã®ãƒ¢ãƒ¼ãƒ‰  å„ MongoDB ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã¯ä»¥ä¸‹ã®ï¼•ã¤ã®ãƒ¢ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹  primary  Primary ã‹ã‚‰ã®ã¿å‚ç…§ã™ã‚‹ Primary ãŒä½¿ç”¨ã§ããªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ  primaryPreferred  Primary ã‹ã‚‰å‚ç…§ã™ã‚‹ãŒä½¿ç”¨ã§ããªã„å ´åˆã¯ Secondary ã‹ã‚‰å‚ç…§ã™ã‚‹  secondary  Secondary ã‹ã‚‰ã®ã¿å‚ç…§ã™ã‚‹ ä½¿ç”¨å¯èƒ½ãª Secondary ãŒç„¡ã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹  secondaryPreferred  Secondary ã‹ã‚‰å‚ç…§ã™ã‚‹ãŒä½¿ç”¨å¯èƒ½ãª Secondary ãŒï¼‘å°ã‚‚ãªã„å ´åˆã¯ Primary ã‹ã‚‰å‚ç…§ã™ã‚‹  nearest  ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãŒæœ€ã‚‚ä½ã„ãƒ¡ãƒ³ãƒãƒ¼ã‹ã‚‰å‚ç…§ã™ã‚‹ Primary, Secondary å•ã‚ãªã„  ã‚µãƒ¼ãƒé¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ   ã‚µãƒ¼ãƒãƒ¼ã®é¸æŠã¯æ“ä½œã”ã¨ã«1å›ç™ºç”Ÿã—ã€å‚ç…§è¨­å®šã¨localThresholdMS ã®è¨­å®šã«ã‚ˆã£ã¦æ±ºã‚ã‚‰ã‚Œã‚‹ ã‚µãƒ¼ãƒé¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯å„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ secondary ã¾ãŸã¯ secondaryPreferred ãƒ¢ãƒ¼ãƒ‰ã‚’æŒ‡å®šã—ãŸå ´åˆ * æœ€ã‚‚ä½ã„ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· + 15msec ä»¥å†…ã®ã‚µãƒ¼ãƒã‚’ã€Œä½¿ç”¨å¯èƒ½ã€ã¨ã™ã‚‹  15msec ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã‚ã‚Šå¤‰æ›´å¯èƒ½ ã€Œä½¿ç”¨å¯èƒ½ã€ãªã‚µãƒ¼ãƒç¾¤ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã§æ¥ç¶šå…ˆãŒæ±ºå®šã•ã‚Œã‚‹    Links  https://docs."><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-42113411-10','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=stylesheet href=https://blog.mknkisk.com/css/main.min.css><script src=https://blog.mknkisk.com/js/jquery.min.js></script><script src=https://blog.mknkisk.com/js/lazysizes.min.js></script><link rel=stylesheet href=https://blog.mknkisk.com/css/fontawsome.min.css><script src=https://blog.mknkisk.com/js/medium-zoom.min.js></script><body class="d-flex flex-column h-100"><header><div class="container-lg clearfix"><div class="col-12 link-primary"><a class=main-title href=https://blog.mknkisk.com/>mknkisk.log</a></div></div></header><main><div class="container-lg clearfix"><div class="col-md-9 col-12 float-left" id=content><article><h4 class=post-title><a href=https://blog.mknkisk.com/posts/mongodb-read-preference-note/>MongoDB : Replica Set ã®å‚ç…§è¨­å®š</a></h4><div class="post-meta link-alter"><time><i class="fas fa-calendar-day"></i>&nbsp;2018-06-04</time><span><i class="fas fa-tag"></i>&nbsp;No tag</span></div><div class="post-content markdown-body"><p>ğŸ“MongoDB ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç®‡æ¡æ›¸ãã—ã¦ã„ãã€‚éšæ™‚æ›´æ–°</p><h2 id=env--versions>Env / Versions</h2><ul><li>MongoDB v3.6</li></ul><h2 id=å‚ç…§ã®å„ªå…ˆåº¦è¨­å®š>å‚ç…§ã®å„ªå…ˆåº¦è¨­å®š</h2><ul><li>âš ï¸ Primary ã‹ã‚‰ Secondary ã¸ã®éåŒæœŸãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯é…å»¶ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€å¤ã„ãƒ‡ãƒ¼ã‚¿ãŒè¿”ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹</li></ul><h2 id=å‚ç…§ã®ãƒ¢ãƒ¼ãƒ‰>å‚ç…§ã®ãƒ¢ãƒ¼ãƒ‰</h2><ul><li>å„ MongoDB ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã¯ä»¥ä¸‹ã®ï¼•ã¤ã®ãƒ¢ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹</li></ul><h3 id=primary>primary</h3><ul><li>Primary ã‹ã‚‰ã®ã¿å‚ç…§ã™ã‚‹</li><li>Primary ãŒä½¿ç”¨ã§ããªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹</li><li>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</li></ul><h3 id=primarypreferred>primaryPreferred</h3><ul><li>Primary ã‹ã‚‰å‚ç…§ã™ã‚‹ãŒä½¿ç”¨ã§ããªã„å ´åˆã¯ Secondary ã‹ã‚‰å‚ç…§ã™ã‚‹</li></ul><h3 id=secondary>secondary</h3><ul><li>Secondary ã‹ã‚‰ã®ã¿å‚ç…§ã™ã‚‹</li><li>ä½¿ç”¨å¯èƒ½ãª Secondary ãŒç„¡ã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹</li></ul><h3 id=secondarypreferred>secondaryPreferred</h3><ul><li>Secondary ã‹ã‚‰å‚ç…§ã™ã‚‹ãŒä½¿ç”¨å¯èƒ½ãª Secondary ãŒï¼‘å°ã‚‚ãªã„å ´åˆã¯ Primary ã‹ã‚‰å‚ç…§ã™ã‚‹</li></ul><h3 id=nearest>nearest</h3><ul><li>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãŒæœ€ã‚‚ä½ã„ãƒ¡ãƒ³ãƒãƒ¼ã‹ã‚‰å‚ç…§ã™ã‚‹</li><li>Primary, Secondary å•ã‚ãªã„</li></ul><h2 id=ã‚µãƒ¼ãƒé¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ >ã‚µãƒ¼ãƒé¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </h2><ul><li>ã‚µãƒ¼ãƒãƒ¼ã®é¸æŠã¯æ“ä½œã”ã¨ã«1å›ç™ºç”Ÿã—ã€å‚ç…§è¨­å®šã¨localThresholdMS ã®è¨­å®šã«ã‚ˆã£ã¦æ±ºã‚ã‚‰ã‚Œã‚‹</li><li>ã‚µãƒ¼ãƒé¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯å„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹</li><li>secondary ã¾ãŸã¯ secondaryPreferred ãƒ¢ãƒ¼ãƒ‰ã‚’æŒ‡å®šã—ãŸå ´åˆ * æœ€ã‚‚ä½ã„ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· + 15msec
ä»¥å†…ã®ã‚µãƒ¼ãƒã‚’ã€Œä½¿ç”¨å¯èƒ½ã€ã¨ã™ã‚‹<ul><li>15msec ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã‚ã‚Šå¤‰æ›´å¯èƒ½</li><li>ã€Œä½¿ç”¨å¯èƒ½ã€ãªã‚µãƒ¼ãƒç¾¤ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã§æ¥ç¶šå…ˆãŒæ±ºå®šã•ã‚Œã‚‹</li></ul></li></ul><h2 id=links>Links</h2><ul><li><a href=https://docs.mongodb.com/manual/core/read-preference/>https://docs.mongodb.com/manual/core/read-preference/</a></li><li><a href=https://docs.mongodb.com/manual/core/read-preference-mechanics/>https://docs.mongodb.com/manual/core/read-preference-mechanics/</a></li><li><a href=https://www.manning.com/books/mongodb-in-action-second-edition target=_blank>Manning | MongoDB in Action, Second Edition</a></li></ul></div></article><div class="license markdown-body"><blockquote><p>Unless otherwise noted, the content of this site is licensed under <a rel=license href target=_blank></a>.</p></blockquote></div></div><div class="col-md-3 col-12 float-left link-alter" id=sidebar><div class=widget-toc><h5>TOC</h5><nav id=TableOfContents><ul><li><a href=#env--versions>Env / Versions</a></li><li><a href=#å‚ç…§ã®å„ªå…ˆåº¦è¨­å®š>å‚ç…§ã®å„ªå…ˆåº¦è¨­å®š</a></li><li><a href=#å‚ç…§ã®ãƒ¢ãƒ¼ãƒ‰>å‚ç…§ã®ãƒ¢ãƒ¼ãƒ‰</a><ul><li><a href=#primary>primary</a></li><li><a href=#primarypreferred>primaryPreferred</a></li><li><a href=#secondary>secondary</a></li><li><a href=#secondarypreferred>secondaryPreferred</a></li><li><a href=#nearest>nearest</a></li></ul></li><li><a href=#ã‚µãƒ¼ãƒé¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ >ã‚µãƒ¼ãƒé¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </a></li><li><a href=#links>Links</a></li></ul></nav></div><div class=widget-pages><h5>Pages</h5><ul><li><a href=/index.xml target=_blank>RSS</a></li></ul></div><div class=widget-tags><h5>Tags</h5><div></div></div><div class=widget-links><h5>Links</h5><ul></ul></div></div></div></main><footer><div class="container-lg text-center"><p>&copy; 2020 <a href=https://blog.mknkisk.com/></a>| Powered by <a href=https://github.com/amzrk2/hugo-theme-fuji/ target=_blank>Fuji</a> & <a href=https://gohugo.io/ target=_blank>Hugo</a></p></div></footer><script>$(function(){mediumZoom('.img-zoomable',{margin:32});});</script><script>$('.widget-toc a').click(function(){$('html, body').animate({scrollTop:$($(this).attr('href')).offset().top});});</script></body></html>